-- PRIVATE SERVER FORCE REJOIN | Bee Swarm Simulator
-- EXTREME METHOD: Override Reconnect button's core function
-- CRITICAL: Place in AUTO-EXECUTE folder

local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local StarterGui = game:GetService("StarterGui")

-- YOUR PRIVATE SERVER
local PLACE_ID = 1537690962
local PRIVATE_SERVER_CODE = "16707204235853911608327042947697"

repeat task.wait() until CoreGui:FindFirstChild('RobloxPromptGui')
local promptOverlay = CoreGui.RobloxPromptGui.promptOverlay

-- Function that replaces what "Reconnect" does
local function replaceReconnectFunction()
    -- Get the ErrorPrompt
    local errorPrompt = promptOverlay:WaitForChild("ErrorPrompt")
    
    -- Navigate to Reconnect button
    local buttonArea = errorPrompt.MessageArea.ErrorFrame.ButtonArea
    local reconnectButton = buttonArea:FindFirstChild("ReconnectButton") or 
                           buttonArea:FindFirstChild("Button2") or 
                           buttonArea:GetChildren()[2]
    
    if not reconnectButton then
        warn("‚ùå Could not find Reconnect button")
        return false
    end
    
    -- CHANGE THE BUTTON'S FUNCTION
    -- First, remove ALL existing connections
    for _, conn in ipairs(getconnections(reconnectButton.MouseButton1Up)) do
        conn:Disconnect()
    end
    
    -- Add our private server teleport
    reconnectButton.MouseButton1Up:Connect(function()
        print("üö® Reconnect button clicked! Redirecting to private server...")
        
        -- Hide the prompt
        errorPrompt.Enabled = false
        
        -- Force private server teleport
        TeleportService:TeleportToPrivateServer(PLACE_ID, PRIVATE_SERVER_CODE, {Players.LocalPlayer})
        
        -- Aggressive retry loop
        while true do
            task.wait(2)
            TeleportService:TeleportToPrivateServer(PLACE_ID, PRIVATE_SERVER_CODE, {Players.LocalPlayer})
        end
    end)
    
    -- Change button text to show it's modified
    local textLabel = reconnectButton:FindFirstChild("ButtonText")
    if textLabel then
        textLabel.Text = "‚Üí Private Server"
        textLabel.TextColor3 = Color3.fromRGB(0, 255, 0) -- Green
    end
    
    print("‚úÖ Reconnect button successfully hijacked!")
    return true
end

-- Detect disconnection prompt
promptOverlay.ChildAdded:Connect(function(child)
    if child.Name == 'ErrorPrompt' then
        task.wait(0.5)
        replaceReconnectFunction()
    end
end)

-- If already disconnected
if promptOverlay:FindFirstChild('ErrorPrompt') then
    replaceReconnectFunction()
end

print("‚úÖ PRIVATE SERVER RECONNECT OVERRIDE IS ACTIVE")
print("üéØ When you click 'Reconnect', it will go to your private server!")
print("üéØ Or wait 5 seconds and it will click itself!")
